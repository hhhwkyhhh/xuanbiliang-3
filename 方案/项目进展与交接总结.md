# 项目进展与 Simulink-Abaqus 联合仿真交接文档

## 1. 项目背景与目标

### 1.1 总体目标
本项目旨在构建一套高保真的 **MIMO（多输入多输出）随机振动控制虚实融合仿真系统**。
目标是利用有限元软件（Abaqus）的高精度结构动力学计算能力，结合 MATLAB/Simulink 的复杂控制算法，模拟真实的振动台环境试验。

### 1.2 被控对象与系统架构
*   **物理对象**：导弹试验件 + 双电动振动台（Electro-Dynamic Shaker）组成的刚柔耦合系统。
*   **控制维度**：N输入 N输出（目前 N=2），针对特定的加速度功率谱密度（PSD）谱形进行闭环控制。
*   **控制算法**：采用 **矩阵幂次（Matrix Power）修正算法** 进行 PSD 迭代控制，包含频响函数（FRF）估计、驱动谱更新等核心环节。

### 1.3 项目当前进展
1.  **纯 MATLAB 仿真**：已成功在 MATLAB/Simulink 中实现了基于线性传递函数（State-Space）的控制闭环，验证了矩阵幂次算法的正确性（对应文件 `control_model.slx` 及相关 .m 脚本）。
2.  **联合仿真迁移**：目前正在将被控对象从简单的 State-Space 模块替换为 **Abaqus 有限元模型**。
3.  **核心难点**：解决 Simulink（时间步控制/信号处理）与 Abaqus（大规模计算）之间的数据交互与时序同步问题。

## 2. 当前技术路线：分段数据交互 (Segmented Data Exchange)

为了解决 Simulink（一步一算）与 Abaqus（适合批量计算）的时间步协同问题，我们确定了 **“分段批处理”** 的策略：

### 架构流程
1.  **Simulink (Accumulator)**：以 0.0001s 步长运行，积累 **15秒** 的力信号 `u(t)`。
2.  **数据交换**：将 15s 的力数据写入 `u_batch.txt`。
3.  **Abaqus 计算**：读取 txt，计算 15s 的响应，输出加速度 `y_batch.txt` 和速度 `v_batch.txt`。
4.  **Simulink (Dispatcher)**：读取 txt，以 0.0001s 步长**逐点释放**数据给后级模块。
5.  **Simulink (Buffer)**：累积 5120 个点进行 FFT 和控制算法更新（保持原有的 5120Hz 信号处理逻辑）。

### 模型状态
*   **文件位置**：`d:\desktop\虚实融合项目\xuanbiliang-3\control_model.slx`
*   **最新动作**：已对 `control_model.slx` 和 `H_Estimation.slx` 进行了**完全解压**（位于 `*_extract` 文件夹），请直接读取 XML 文件理解内部结构。

## 3. 当前面临的挑战：电磁系统反馈延迟

### 问题描述
后续需要在模型中加入 **电磁系统（Electromagnetic System）**。
电磁力包含阻尼项：**$F_{em}(t) = K_v \cdot v(t)$**
这意味着 Simulink 在生成当前的驱动力 $u(t)$ 时，需要**实时**的结构速度 $v(t)$。

### 延迟悖论
在 **分段交互 (0~15s, 15~30s...)** 模式下：
*   当 Simulink 运行 **第2段 (15~30s)** 时：
    *   即便是 Simlink 中的 `Signal_Generator` 生成当前时刻 $t=20s$ 的驱动电压时，
    *   由于 Abaqus 尚未计算第2段，Simulink 无法获取 $t=20s$ 时刻的真实速度反馈。
    *   Simulink 手里只有 **第1段 (0~15s)** 的历史速度数据。
*   导致：**无法获取“当前时刻”的速度进行实时的电磁阻尼计算**，这造成了逻辑上的因果悖论（Causal Paradox）。

## 4. 待探讨议题
如何在这个分段交互的架构下，合理处理电磁系统的速度反馈？我们需要在 **精度（实时性）** 与 **效率（批处理）** 之间寻找平衡，或者寻找数学上的等效替代方案。
